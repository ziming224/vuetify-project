import{p as A,v as z,s as k,c as f,d as D,w,o as W,b as X,g as R,r as j,y as P,u as q,z as G,D as E,F as h,G as C,M as J,e as K,k as O,n as Q,a1 as Z,a2 as ee,a3 as te,a4 as ae,a5 as le,a6 as oe,J as ne,K as se,L as re,a7 as ue,Q as ie,a8 as ce,E as U,a9 as de,aa as ve,ab as me,ac as ge,W as fe,ad as he,ae as be,X as ye,Y as I,Z as S,_ as V,af as _,ag as N,ah as L,I as x,a0 as Se,ai as Y,aj as Ve,$ as H,ak as ke}from"./index-BnytfeGo.js";import{V as Be}from"./VContainer-_aepzmO1.js";import{V as $,m as Te,a as pe,b as we}from"./VToolbar-C3uSh_0b.js";import{u as _e}from"./ssrBoot-64Mr1rQQ.js";import{V as Ce}from"./VMain-wQ5PIW4g.js";const Pe=A({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ie(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:c}=a;let v=0,u=0;const t=z(null),r=k(0),o=k(0),m=k(0),i=k(!1),s=k(!1),g=f(()=>Number(e.scrollThreshold)),B=f(()=>D((g.value-r.value)/g.value||0)),b=()=>{const n=t.value;if(!n||c&&!c.value)return;v=r.value,r.value="window"in n?n.pageYOffset:n.scrollTop;const d=n instanceof Window?document.documentElement.scrollHeight:n.scrollHeight;if(u!==d){u=d;return}s.value=r.value<v,m.value=Math.abs(r.value-g.value)};return w(s,()=>{o.value=o.value||r.value}),w(i,()=>{o.value=0}),W(()=>{w(()=>e.scrollTarget,n=>{var y;const d=n?document.querySelector(n):window;d&&d!==t.value&&((y=t.value)==null||y.removeEventListener("scroll",b),t.value=d,t.value.addEventListener("scroll",b,{passive:!0}))},{immediate:!0})}),X(()=>{var n;(n=t.value)==null||n.removeEventListener("scroll",b)}),c&&w(c,b,{immediate:!0}),{scrollThreshold:g,currentScroll:r,currentThreshold:m,isScrollActive:i,scrollRatio:B,isScrollingUp:s,savedScroll:o}}const Ne=A({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Te(),...J(),...Pe(),height:{type:[Number,String],default:64}},"VAppBar"),Le=R()({name:"VAppBar",props:Ne(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:c}=a;const v=z(),u=j(e,"modelValue"),t=f(()=>{var T;const l=new Set(((T=e.scrollBehavior)==null?void 0:T.split(" "))??[]);return{hide:l.has("hide"),fullyHide:l.has("fully-hide"),inverted:l.has("inverted"),collapse:l.has("collapse"),elevate:l.has("elevate"),fadeImage:l.has("fade-image")}}),r=f(()=>{const l=t.value;return l.hide||l.fullyHide||l.inverted||l.collapse||l.elevate||l.fadeImage||!u.value}),{currentScroll:o,scrollThreshold:m,isScrollingUp:i,scrollRatio:s}=Ie(e,{canScroll:r}),g=P(()=>t.value.hide||t.value.fullyHide),B=f(()=>e.collapse||t.value.collapse&&(t.value.inverted?s.value>0:s.value===0)),b=f(()=>e.flat||t.value.fullyHide&&!u.value||t.value.elevate&&(t.value.inverted?o.value>0:o.value===0)),n=f(()=>t.value.fadeImage?t.value.inverted?1-s.value:s.value:void 0),d=f(()=>{var M,F;if(t.value.hide&&t.value.inverted)return 0;const l=((M=v.value)==null?void 0:M.contentHeight)??0,T=((F=v.value)==null?void 0:F.extensionHeight)??0;return g.value?o.value<m.value||t.value.fullyHide?l+T:l:l+T});q(()=>!!e.scrollBehavior,()=>{K(()=>{g.value?t.value.inverted?u.value=o.value>m.value:u.value=i.value||o.value<m.value:u.value=!0})});const{ssrBootStyles:y}=_e(),{layoutItemStyles:p}=G({id:e.name,order:f(()=>parseInt(e.order,10)),position:P(()=>e.location),layoutSize:d,elementSize:k(void 0),active:u,absolute:P(()=>e.absolute)});return E(()=>{const l=$.filterProps(e);return h($,C({ref:v,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...p.value,"--v-toolbar-image-opacity":n.value,height:void 0,...y.value},e.style]},l,{collapse:B.value,flat:b.value}),c)}),{}}}),xe=R()({name:"VAppBarTitle",props:pe(),setup(e,a){let{slots:c}=a;return E(()=>h(we,C(e,{class:"v-app-bar-title"}),c)),{}}}),He=A({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:ce,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...ie(),...ue({location:"top end"}),...re(),...se(),...ne(),...oe({transition:"scale-rotate-transition"})},"VBadge"),Ae=R()({name:"VBadge",inheritAttrs:!1,props:He(),setup(e,a){const{backgroundColorClasses:c,backgroundColorStyles:v}=O(()=>e.color),{roundedClasses:u}=Q(e),{t}=Z(),{textColorClasses:r,textColorStyles:o}=ee(()=>e.textColor),{themeClasses:m}=te(),{locationStyles:i}=ae(e,!0,s=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(s)?Number(e.offsetY??0):["left","right"].includes(s)?Number(e.offsetX??0):0));return E(()=>{const s=Number(e.content),g=!e.max||isNaN(s)?e.content:s<=Number(e.max)?s:`${e.max}+`,[B,b]=le(a.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return h(e.tag,C({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},b,{style:e.style}),{default:()=>{var n,d;return[U("div",{class:"v-badge__wrapper"},[(d=(n=a.slots).default)==null?void 0:d.call(n),h(de,{transition:e.transition},{default:()=>{var y,p;return[ve(U("span",C({class:["v-badge__badge",m.value,c.value,u.value,r.value],style:[v.value,o.value,e.inline?{}:i.value],"aria-atomic":"true","aria-label":t(e.label,s),"aria-live":"polite",role:"status"},B),[e.dot?void 0:a.slots.badge?(p=(y=a.slots).badge)==null?void 0:p.call(y):e.icon?h(ge,{icon:e.icon},null):g]),[[me,e.modelValue]])]}})])]}})}),{}}}),Ye={__name:"default",setup(e){const a=fe(),c=he(),v=be(),u=f(()=>[{title:"首頁",to:"/",icon:"mdi-home",show:!0},{title:"註冊",to:"/register",icon:"mdi-account-plus",show:!a.isLoggedIn},{title:"登入",to:"/login",icon:"mdi-login",show:!a.isLoggedIn},{title:"購物車",to:"/cart",icon:"mdi-cart",show:a.isLoggedIn},{title:"訂單",to:"/orders",icon:"mdi-invoice-list-outline",show:a.isLoggedIn},{title:"管理",to:"/admin",icon:"mdi-cog",show:a.isLoggedIn&&a.isAdmin}]),t=async()=>{try{await ke.logout()}catch(r){console.error(r)}a.logout(),v.push("/"),c({text:"登出成功！",snackbarProps:{color:"green"}})};return(r,o)=>{const m=ye("router-view");return S(),I(x,null,[h(Le,null,{default:V(()=>[h(Be,{class:"d-flex align-center"},{default:V(()=>[h(xe,null,{default:V(()=>o[0]||(o[0]=[L("購物網站")])),_:1,__:[0]}),(S(!0),I(x,null,Se(u.value,i=>(S(),I(x,{key:i.to},[i.show?(S(),_(Y,{key:0,"prepend-icon":i.icon,to:i.to},{default:V(()=>[L(Ve(i.title)+" ",1),i.to==="/cart"&&H(a).cartTotal>0?(S(),_(Ae,{key:0,color:"red",content:H(a).cartTotal,floating:""},null,8,["content"])):N("",!0)]),_:2},1032,["prepend-icon","to"])):N("",!0)],64))),128)),H(a).isLoggedIn?(S(),_(Y,{key:0,"prepend-icon":"mdi-logout",onClick:t},{default:V(()=>o[1]||(o[1]=[L("登出")])),_:1,__:[1]})):N("",!0)]),_:1})]),_:1}),h(Ce,null,{default:V(()=>[(S(),_(m,{key:r.$route.fullPath}))]),_:1})],64)}}};export{Ye as default};
