import{X as B,af as P,Z as u,_ as a,F as t,V as I,aq as $,ah as c,aj as s,ar as D,as as F,at as G,ad as M,v as i,c as y,Y as g,au as O,I as k,a0 as x,av as U,ai as j,G as w}from"./index-BnytfeGo.js";import{p as N}from"./product-rj1BT4nL.js";import{V as R,a as _,b as S}from"./route-block-DENcxyka.js";import{V as q,a as b,b as X,c as Y}from"./VPagination-Dxrs5uGA.js";import{V as Z,a as z}from"./VList-CpEARpmD.js";import{V as H}from"./VContainer-_aepzmO1.js";import"./ssrBoot-64Mr1rQQ.js";import"./VDivider-LPd1PCe4.js";const J={__name:"ProductCard",props:["_id","image","name","category","price","description"],setup(o){return(h,f)=>{const d=B("router-link");return u(),P(G,null,{default:a(()=>[t(I,{cover:"",height:"300",src:o.image},null,8,["src"]),t($,null,{default:a(()=>[t(d,{to:"/product/"+o._id},{default:a(()=>[c(s(o.name),1)]),_:1},8,["to"])]),_:1}),t(D,null,{default:a(()=>[c(s(o.category)+" / "+s(o.price),1)]),_:1}),t(F,null,{default:a(()=>[c(s(o.description),1)]),_:1})]),_:1})}}},C=10,K={__name:"index",setup(o){const h=M(),f=i([]),d=y(()=>f.value.filter(l=>{const r=l.name.toLowerCase().includes(v.value.toLowerCase()),e=m.value?l.category===m.value:!0;return r&&e}).sort((l,r)=>{const e=V[p.value];return e.key==="createdAt"||e.key==="updatedAt"?e.direction*(new Date(l[e.key])-new Date(r[e.key])):e.direction*(l[e.key]>r[e.key]?1:-1)})),n=i(1),A=y(()=>Math.ceil(d.value.length/C)),E=y(()=>d.value.slice((n.value-1)*C,n.value*C)),v=i(""),m=i(""),L=["電子產品","服裝","家居用品","書籍","玩具","食品","其他"],p=i(0),V=[{text:"名稱",key:"name",direction:1},{text:"價格：低到高",key:"price",direction:1},{text:"價格：高到低",key:"price",direction:-1},{text:"最新商品",key:"createdAt",direction:-1},{text:"最舊商品",key:"createdAt",direction:1}];return(async()=>{try{const{data:l}=await N.get();f.value=l.products}catch(l){console.error("Error fetching products:",l),h({text:"無法載入商品資料",snackbarProps:{color:"red"}})}})(),(l,r)=>(u(),P(H,null,{default:a(()=>[t(R,{justify:"center"},{default:a(()=>[t(_,{cols:"12"},{default:a(()=>[t(O,{modelValue:v.value,"onUpdate:modelValue":[r[0]||(r[0]=e=>v.value=e),r[1]||(r[1]=e=>n.value=1)],flat:"","hide-details":"",placeholder:"搜尋商品","prepend-inner-icon":"mdi-magnify",variant:"solo"},null,8,["modelValue"]),t(q,{modelValue:m.value,"onUpdate:modelValue":[r[2]||(r[2]=e=>m.value=e),r[3]||(r[3]=e=>n.value=1)],mandatory:""},{default:a(()=>[t(b,{filter:"",text:"全部",value:"",variant:"outlined"}),(u(),g(k,null,x(L,e=>t(b,{key:e,filter:"",text:e,value:e,variant:"outlined"},null,8,["text","value"])),64)),t(U),t(X,null,{activator:a(({props:e})=>[t(j,w(e,{"append-icon":"mdi-chevron-down",ripple:!1,variant:"text"}),{default:a(()=>[c(s(V[p.value].text),1)]),_:2},1040)]),default:a(()=>[t(Z,null,{default:a(()=>[(u(),g(k,null,x(V,(e,T)=>t(z,{key:e.text,onClick:W=>{p.value=T,n.value=1}},{default:a(()=>[c(s(e.text),1)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),(u(!0),g(k,null,x(E.value,e=>(u(),P(_,{key:e._id,cols:"12",lg:"4",md:"6"},{default:a(()=>[t(J,w({ref_for:!0},e),null,16)]),_:2},1024))),128)),t(_,{cols:"12"},{default:a(()=>[t(Y,{modelValue:n.value,"onUpdate:modelValue":r[4]||(r[4]=e=>n.value=e),circle:"",length:A.value,"total-visible":5},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1}))}};typeof S=="function"&&S(K);export{K as default};
