import{ad as _,W as w,ak as x,ae as S,af as k,_ as t,Z as y,F as s,E as F,aM as q,$ as a,au as m,ai as B,ah as M}from"./index-BnytfeGo.js";import{u as h,c as C,b as c,e as p,V as N}from"./index.esm-jf5OkVDN.js";import{V as U,a as f,b as V}from"./route-block-DENcxyka.js";import{V as $}from"./VContainer-_aepzmO1.js";import{V as P}from"./VDivider-LPd1PCe4.js";const R={__name:"login",setup(T){const d=_(),b=S(),g=w(),l=h({validationSchema:C({account:c().required("帳號或電子郵件是必填的"),password:c().required("密碼是必填的").min(4,"密碼至少需要 4 個字元").max(20,"密碼最多只能有 20 個字元")})}),u=p("account"),n=p("password"),v=l.handleSubmit(async i=>{var e,o;try{const{data:r}=await x.login({account:i.account,password:i.password});g.login(r.user),d({text:"登入成功！",snackbarProps:{color:"green"}}),b.push("/")}catch(r){console.error(r),d({text:((o=(e=r==null?void 0:r.response)==null?void 0:e.data)==null?void 0:o.message)||"登入失敗，請稍後再試！",snackbarProps:{color:"red"}})}});return(i,e)=>(y(),k($,null,{default:t(()=>[s(U,null,{default:t(()=>[s(f,{cols:"12"},{default:t(()=>e[2]||(e[2]=[F("h1",{class:"text-center"},"登入",-1)])),_:1,__:[2]}),s(P),s(f,{cols:"12"},{default:t(()=>[s(N,{disabled:a(l).isSubmitting.value,onSubmit:q(a(v),["prevent"])},{default:t(()=>[s(m,{modelValue:a(u).value.value,"onUpdate:modelValue":e[0]||(e[0]=o=>a(u).value.value=o),"error-messages":a(u).errorMessage.value,label:"帳號或信箱",required:""},null,8,["modelValue","error-messages"]),s(m,{modelValue:a(n).value.value,"onUpdate:modelValue":e[1]||(e[1]=o=>a(n).value.value=o),counter:"","error-messages":a(n).errorMessage.value,label:"密碼",maxlength:"20",minlength:"4",required:"",type:"password"},null,8,["modelValue","error-messages"]),s(B,{loading:a(l).isSubmitting.value,type:"submit"},{default:t(()=>e[3]||(e[3]=[M("登入")])),_:1,__:[3]},8,["loading"])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};typeof V=="function"&&V(R);export{R as default};
